<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Index</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="main.css">
</head>
<body id="app">
<nav class="main-nav">
    <h3>Kafana</h3>
    <div>
        <button>Login</button>
        <button>Register</button>
    </div>
</nav>
<div class="main-page-container">
    <div class="reservation-info left-info">
        <div class="reservation-card">
            <div class="res-name">Nikola Nikoloski</div>
            <div class="res-mail">nikosla@nikoloski.com</div>
            <div class="res-time">12:00H</div>
            <div class="res-date">17.12.2023</div>
            <div class="res-num-people">32 coveci</div>
        </div>
    </div>
    <div class="reservation-main">
        <form class="reservation-form">
            <label>
                Name:
                <input type="text" name="name" v-model="name">
            </label>
            <label>
                Surname:
                <input type="text" name="surname" v-model="surname">
            </label>
            <label>
                Number People:
                <input type="number" name="numPeople" v-model="numPeople">
            </label>
            <label>
                Number Tables:
                <input type="text" name="numTables" v-model="numTables">
            </label>
            <label>
                Time:
                <input type="time" name="time" v-model="time">
            </label>
            <label>
                Date:
                <input type="date" name="date" v-model="date">
            </label>
            <label>
                Tel:
                <input type="tel" name="telephone" v-model="tel">
            </label>
            <label>
                Email:
                <input type="email" name="email" v-model="email">
            </label>
            <button @click.prevent="test"
            >Make Reservation</button>

        </form>
    </div>
    <div class="reservation-info right-info">
</div>

</div>



<script>

    // import axios from "axios";

    let app =  Vue.createApp({
        computed : {

        },
        methods : {
            submitForm(jsonObj)
            {
                fetch('http://127.0.0.1:5000/api/reserve', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: jsonObj
                })
                    .then(response => response.json())
                    .then(data => {
                        // Handle the response from the backend
                        console.log(data);
                    })
                    .catch(error => {
                        // Handle errors
                        console.error('Error submitting to backend:', error);
                    });
            },
            test()
            {
                let json = this.factory() ;
                console.log(json)

                let stringJson = JSON.stringify(json);
                console.log(stringJson);


                this.submitForm(stringJson)



            },
            factory()
            {
                let name = this.name;
                let surname = this.surname;
                let numPeople = this.numPeople;
                let numTables = this.numTables;
                let time = this.time;
                let date = this.date;
                let tel = this.tel;
                let email = this.email;
                return {
                    name,
                    surname,
                    numPeople,
                    numTables,
                    time,
                    date,
                    tel,
                    email,
                }

            }

        },

        data() {
            return {
                name: "",
                surname:"",
                numPeople:"",
                numTables:"",
                time:null,
                date:null,
                tel:"",
                email:"",
                test1:"TEST",

            };
        }}
    );
    app.mount("#app");
</script>
</body>
</html>
